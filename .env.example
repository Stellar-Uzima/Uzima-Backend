# ═══════════════════════════════════════════════════════════════════════════
# Uzima Backend Environment Configuration
# ═══════════════════════════════════════════════════════════════════════════
# Copy this file to .env and fill in your values.
# See src/config/CONFIG.md for detailed documentation.
# ═══════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# Environment (development | staging | production)
# ─────────────────────────────────────────────────────────────────────────────
NODE_ENV=development

# ─────────────────────────────────────────────────────────────────────────────
# Server Configuration
# ─────────────────────────────────────────────────────────────────────────────
PORT=5000

# ─────────────────────────────────────────────────────────────────────────────
# Database (REQUIRED)
# ─────────────────────────────────────────────────────────────────────────────
MONGO_URI=mongodb://localhost:27017/uzima

# ─────────────────────────────────────────────────────────────────────────────
# Authentication (REQUIRED)
# ─────────────────────────────────────────────────────────────────────────────
# Must be at least 32 characters
JWT_SECRET=your-super-secret-jwt-key-at-least-32-characters

# ─────────────────────────────────────────────────────────────────────────────
# Email - SMTP Configuration (optional if using Resend)
# ─────────────────────────────────────────────────────────────────────────────
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your@email.com
SMTP_PASS=yourpassword
MAIL_FROM="Uzima Health <support@yourdomain.com>"

# ─────────────────────────────────────────────────────────────────────────────
# Email - Resend API (preferred over SMTP)
# ─────────────────────────────────────────────────────────────────────────────
RESEND_API_KEY=re_your_api_key_here

# ─────────────────────────────────────────────────────────────────────────────
# Redis Configuration
# ─────────────────────────────────────────────────────────────────────────────
REDIS_URL=redis://localhost:6379

# ─────────────────────────────────────────────────────────────────────────────
# Rate Limiting Configuration
# Comma-separated list of IP addresses that bypass rate limits (optional)
# Example: RATE_LIMIT_WHITELIST_IPS=127.0.0.1,::1,192.168.1.100
RATE_LIMIT_WHITELIST_IPS=

# Trust Proxy Configuration (for correct IP detection behind reverse proxies)
# Set to 'true' to trust first proxy, or leave as 'false' for direct connections
TRUST_PROXY=false

# Email Queue Configuration
# ─────────────────────────────────────────────────────────────────────────────
EMAIL_MAX_ATTEMPTS=3
EMAIL_BACKOFF_DELAY=2000
EMAIL_WORKER_CONCURRENCY=5
EMAIL_RATE_LIMIT_MAX=10
EMAIL_RATE_LIMIT_DURATION=1000

# ─────────────────────────────────────────────────────────────────────────────
# AWS S3 Configuration
# ─────────────────────────────────────────────────────────────────────────────
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
S3_BUCKET_NAME=uzima-uploads
S3_BACKUP_BUCKET=uzima-backups
S3_BACKUP_PREFIX=mongodb-backups/

# ─────────────────────────────────────────────────────────────────────────────
# Backup Configuration
# ─────────────────────────────────────────────────────────────────────────────
BACKUP_RETENTION_DAYS=30
# Must be at least 32 characters
BACKUP_ENCRYPTION_KEY=your_backup_encryption_key_32_chars
BACKUP_SCHEDULE=0 2 * * *
BACKUP_STORAGE_LIMIT_GB=100

# ─────────────────────────────────────────────────────────────────────────────
# Monitoring
# ─────────────────────────────────────────────────────────────────────────────
SENTRY_DSN=https://your-sentry-dsn

# ─────────────────────────────────────────────────────────────────────────────
# Swagger Configuration
# ─────────────────────────────────────────────────────────────────────────────
SWAGGER_USER=admin
SWAGGER_PASSWORD=changeme
SWAGGER_ALLOWED_IPS=127.0.0.1

# ─────────────────────────────────────────────────────────────────────────────
# Stellar Blockchain (optional)
# ─────────────────────────────────────────────────────────────────────────────
STELLAR_SECRET_KEY=your_stellar_secret_key

# ─────────────────────────────────────────────────────────────────────────────
# Queue Configuration
# ─────────────────────────────────────────────────────────────────────────────
MAX_ATTEMPTS=5
BACKOFF_BASE_MS=1000



## Reconciliation Alert Emails
# Comma-separated list of email addresses to receive alerts when reconciliation finds discrepancies
RECONCILIATION_ALERT_EMAILS=
# Field Level Encryption
ENCRYPTION_KEY_SECRET_v1=your_32_byte_hex_key_here
ENCRYPTION_KEY_CURRENT_VERSION=v1

# CORS Configuration
# Comma-separated list of allowed origins for CORS
# Example: https://app.example.com,https://admin.example.com
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# Elasticsearch Configuration
ELASTICSEARCH_NODE=http://localhost:9200
ELASTICSEARCH_INDEX=medical_records
ELASTICSEARCH_REQUEST_TIMEOUT=5000
ELASTICSEARCH_MAX_RETRIES=3
